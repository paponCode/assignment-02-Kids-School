/**
 * ESP - RTBHouse
 * @version v1.2.8
 * @link https://www.rtbhouse.com/
 */
!function(){const e=async()=>{let e=window.localStorage.getItem("rtbhouse-esp");var t,o=window.localStorage.getItem("rtbhouse-segments");let s;pbjs?.getUserIds&&(s=pbjs?.getUserIds()?.pubcid),e||(e=(t=(e,t)=>e.toString(16).padStart(t,0),(n=crypto.getRandomValues(new Uint8Array(16)))[6]=15&n[6]|64,n[8]=63&n[8]|128,n=new DataView(n.buffer),`${t(n.getUint32(0),8)}-${t(n.getUint16(4),4)}-${t(n.getUint16(6),4)}-${t(n.getUint16(8),4)}-`+t(n.getUint32(10),8)+t(n.getUint16(14),4)),window.localStorage.setItem("rtbhouse-esp",e)),signal_decrypted={domain:encodeURIComponent(window.location.href)},e&&(signal_decrypted["rtbhouse-esp"]=e),s&&(signal_decrypted.EID=s),"browsingTopics"in document&&document.featurePolicy.allowsFeature("browsing-topics")&&(t=await document.browsingTopics(),signal_decrypted.topics=JSON.stringify(t)),o&&(signal_decrypted.segments=o),document.referrer&&(signal_decrypted.referrer=encodeURIComponent(document.referrer));n=signal_decrypted;var n,r,o=await(await(await fetch("https://esp.rtbhouse.com/encrypt",{method:"POST",body:JSON.stringify({publisher_id:"rtbhouse",signal:n}),headers:{"Content-Type":"text/plain"}})).json()).message;return 0<document.location.host.indexOf("gazetkowo.pl")&&(r={shared_id:window.localStorage.getItem("rtbhouse-esp")||"no_data",rtbhouse_cookie:pbjs?.getUserIds()?.pubcid||"no_data"},await(await(await fetch("https://secure-signals-gazetkowo-300234255994.europe-west4.run.app/ss-rtbhouse",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}})).json()).message),Promise.resolve(o)};new class{constructor(e){Object.assign(this,e)}send_signal(){window.googletag.secureSignalProviders||(window.googletag.secureSignalProviders=[]),null!=googletag.secureSignalProviders&&googletag.secureSignalProviders.push({id:"rtbhouse",collectorFunction:e})}}({send_cookie:!0}).send_signal()}();